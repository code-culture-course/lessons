# Ввод/Вывод в Python

## Обзор урока

**Что такое ввод/вывод?**

Ввод/Вывод (I/O) — это способ, которым программы общаются с внешним миром. До этого момента мы писали программы с жёстко заданными данными — всё определялось в самом исходном коде. Но реальным программам нужно:

- **Читать ввод** от пользователей (слушать)
- **Отображать вывод** пользователям (говорить)
- **Сохранять данные**, чтобы они сохранялись между запусками
- **Загружать данные** из файлов или других программ

Без ввода/вывода программы были бы статичными, изолированными и не могли бы адаптироваться к различным ситуациям или запоминать что-либо после завершения работы.

**Где это в вашем пути обучения**

Вы уже изучили:
- Переменные и типы данных
- Функции для организации кода
- Циклы и условные операторы для управления потоком выполнения
- Модули для структурирования больших программ
- Тесты для проверки корректности

Теперь вы готовы сделать свои программы **интерактивными** и **постоянными**. Этот урок научит вас:
- Создавать интерфейсы командной строки (CLI)
- Работать с файлами для сохранения и загрузки данных
- Использовать JSON для хранения структурированных данных
- Обрабатывать ошибки корректно

**Почему ввод/вывод важен**

Без ввода/вывода вы не сможете создать:
- Игры, которые сохраняют ваш прогресс
- Инструменты, обрабатывающие пользовательские данные
- Программы, которые запоминают настройки
- Приложения, которые обмениваются данными с другими программами

Ввод/Вывод превращает код из академического упражнения в реальный, полезный инструмент.

---

## Исторический контекст и мотивация

### Эволюция взаимодействия программ

**Ранние программы: без взаимодействия**

Первые компьютерные программы не имели способа взаимодействовать с пользователями во время выполнения. Всё было жёстко закодировано:

```python
# Представьте, что вы могли написать только такую программу
player_name = "Alice"
player_health = 100
print("Player Alice has 100 health")
```

Чтобы изменить имя игрока, нужно было отредактировать исходный код и перезапустить программу. Никакой гибкости. Никакой памяти между запусками.

**Потребность во вводе**

По мере усложнения программ, разработчикам потребовалось:
- **Взаимодействие с пользователем**: дать пользователю решать, что делать
- **Динамическое поведение**: одна программа, разные результаты в зависимости от ввода
- **Переиспользуемость**: одна программа, много разных применений

Консоль (текстовый интерфейс) стала первым и самым простым способом взаимодействия с программами. Она до сих пор широко используется для:
- Администрирования серверов
- Инструментов разработки
- Быстрых утилит
- Прототипирования

**Потребность в постоянном хранении**

Программы работают в памяти. Когда они останавливаются, всё исчезает. Но пользователям нужны были программы, которые могли бы:
- Запоминать настройки
- Сохранять прогресс
- Хранить данные между сеансами

Файлы стали решением — способом записывать данные на диск и считывать их позже.

**Зачем нужны структурированные форматы данных вроде JSON?**

Ранние программы сохраняли данные как простой текст:

```
Alice
100
50
```

Но это было хрупко:
- Что если порядок изменится?
- Что если вы добавите новое поле?
- Как поделиться данными с другой программой?

**Структурированные форматы** вроде JSON решили это, предоставив:
- Метки для данных с ключами: `{"name": "Alice", "health": 100}`
- Читаемость для человека (не бинарный формат)
- Работу в разных языках программирования
- Сохранение типов данных (числа, строки, списки, объекты)

JSON стал универсальным языком для общения программ друг с другом.

---

## Концептуальные объяснения

### Консольный ввод/вывод: говорить и слушать

Представьте вашу программу как собеседника с пользователем.

**`print()` — Ваша программа говорит**

```python
print("Привет, искатель приключений!")
```

Это отправляет текст в консоль. Пользователь видит его. Просто.

**`input()` — Ваша программа слушает**

```python
name = input("Как вас зовут? ")
```

Программа приостанавливается и ждёт, пока пользователь что-то напечатает и нажмёт Enter. Всё, что он напечатает, становится строкой.

**Важно: ввод всегда возвращает строку**

```python
age = input("Сколько вам лет? ")
# age это "25", не 25
```

Если вам нужно число, конвертируйте:

```python
age = int(input("Сколько вам лет? "))
# Теперь age это 25 (целое число)
```

**Построение простых меню**

Комбинируйте `input()` с циклами для создания интерактивных меню:

```python
while True:
    choice = input("Выберите (а)така или (б)егство: ")
    if choice == "а":
        print("Вы атакуете!")
        break
    elif choice == "б":
        print("Вы убегаете!")
        break
    else:
        print("Неверный выбор. Попробуйте снова.")
```

Это основа интерфейсов командной строки.

---

### Файлы: постоянное хранилище

**Что такое файл с точки зрения программы?**

Файл — это как блокнот, который живёт на вашем диске. Ваша программа может:
- **Записывать** заметки в него
- **Читать** заметки из него
- **Добавлять** новые заметки, не стирая старые

Когда ваша программа останавливается, файл остаётся. В следующий раз, когда вы запустите программу, заметки всё ещё там.

**Открытие файла**

Перед тем как читать или писать, вы должны **открыть** файл:

```python
file = open("data.txt", "r")  # Открыть для чтения
```

Режимы:
- `"r"` — чтение (файл должен существовать)
- `"w"` — запись (создаёт файл, стирает существующее содержимое)
- `"a"` — добавление (добавляет в конец)

**Чтение из файла**

```python
file = open("story.txt", "r")
content = file.read()  # Прочитать весь файл как строку
file.close()  # Всегда закрывайте по окончании
```

**Запись в файл**

```python
file = open("log.txt", "w")
file.write("Игра началась\n")
file.write("Игрок вошёл в подземелье\n")
file.close()
```

**Почему файлы должны быть закрыты?**

Когда вы открываете файл, операционная система резервирует ресурсы. Если вы не закроете его:
- Изменения могут не сохраниться (они буферизируются)
- Другие программы могут не иметь доступа к нему
- Вы можете исчерпать файловые дескрипторы

Закрытие освобождает эти ресурсы и гарантирует запись данных на диск.

**Что если файл не существует?**

- Открытие с `"r"` — **Ошибка**: `FileNotFoundError`
- Открытие с `"w"` или `"a"` — файл создаётся автоматически

---

### JSON: структурированные данные

**Что такое JSON?**

JSON (JavaScript Object Notation) — это текстовый формат для хранения структурированных данных. Несмотря на название, он используется везде, не только в JavaScript.

**Зачем нужен JSON?**

Представьте сохранение статистики игрока:

**Простой текст (хрупко):**
```
Alice
100
25
```

**JSON (понятно):**
```json
{
  "name": "Alice",
  "health": 100,
  "mana": 25
}
```

С JSON:
- Поля помечены
- Порядок не важен
- Добавление новых полей не ломает старый код
- Другие программы могут легко его прочитать

**Базовая структура**

JSON поддерживает:
- **Объекты** (как словари Python): `{"ключ": "значение"}`
- **Массивы** (как списки Python): `[1, 2, 3]`
- **Строки**: `"привет"`
- **Числа**: `42`, `3.14`
- **Логические значения**: `true`, `false`
- **Null**: `null`

**JSON текст vs объекты Python**

JSON — это **текст**. Чтобы работать с ним в Python:

1. **Конвертировать Python → JSON текст** (сериализация):
   ```python
   import json
   data = {"name": "Alice", "health": 100}
   json_text = json.dumps(data)
   # json_text это '{"name": "Alice", "health": 100}'
   ```

2. **Конвертировать JSON текст → Python** (десериализация):
   ```python
   data = json.loads(json_text)
   # data это {"name": "Alice", "health": 100}
   ```

При работе с файлами:
- `json.dump()` — записать объект Python в файл как JSON
- `json.load()` — прочитать JSON из файла в объект Python

---

## Примеры кода

Все примеры находятся в директории [examples/](examples/). Каждый демонстрирует определённую концепцию.

### Консольный ввод/вывод

- [01_basic_input.py](examples/01_basic_input.py) — Чтение и использование ввода
- [02_input_validation.py](examples/02_input_validation.py) — Валидация числового ввода
- [03_simple_menu.py](examples/03_simple_menu.py) — Построение CLI меню с циклами

### Операции с файлами

- [04_write_file.py](examples/04_write_file.py) — Запись текста в файл
- [05_read_file.py](examples/05_read_file.py) — Чтение текста из файла
- [06_append_file.py](examples/06_append_file.py) — Добавление в существующий файл

### JSON

- [07_save_json.py](examples/07_save_json.py) — Сохранение словаря Python в JSON
- [08_load_json.py](examples/08_load_json.py) — Загрузка JSON в Python
- [09_json_persistence.py](examples/09_json_persistence.py) — Полный цикл сохранения/загрузки

### Мини-проект

- [10_mini_project/](examples/10_mini_project/) — Пошаговый менеджер задач CLI

---

## Практические упражнения

Выполните упражнения в [exercises/](exercises/), чтобы закрепить понимание.

Упражнения охватывают:
1. Чтение и валидацию ввода
2. Построение интерактивных меню
3. Запись данных в файлы
4. Чтение данных из файлов
5. Использование JSON для структурированного хранения
6. Корректную обработку ошибок

Каждое упражнение основывается на предыдущих концепциях. Выполняйте их по порядку для лучшего опыта обучения.

---

## Домашнее задание

Создайте полное CLI приложение, использующее все концепции из этого урока.

См. [homework/](homework/) для подробных требований и начального кода.

---

## Тестирование логики ввода/вывода

Тестирование кода, использующего `input()` и `print()`, может быть сложным. Узнайте стратегии для создания тестируемого I/O кода в [tests/](tests/).

---

## Следующие шаги

После завершения этого урока, вы будете готовы к:
- Созданию интерактивных инструментов командной строки
- Созданию программ, которые сохраняют данные
- Работе со структурированными форматами данных
- Корректной обработке пользовательских ошибок

В сочетании с вашими знаниями о функциях, циклах и модулях, теперь вы можете создавать реальные, полезные программы!
